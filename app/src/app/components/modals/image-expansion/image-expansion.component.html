<h2 mat-dialog-title>{{data.label}}</h2>
<mat-dialog-content>
    <div class="grid gap images col-2" >
        <div class="grid__cell center-cell-content grid__cell__full-width">
            <mat-slide-toggle 
                class="segmentation-toggle"
                [color]="segmentationToggle.color"
                [checked]="segmentationToggle.checked"
                [disabled]="!loadedSegmentations"
                (change)="toggleSegmentation($event)">
                Segmentation
            </mat-slide-toggle>
        </div>
        <ng-template #loader>
            <mat-progress-bar mode="indeterminate"></mat-progress-bar>
        </ng-template>
        <div class="grid__cell center-cell-content" >
            <div class="segmentation" [ngStyle]="{display: loadedSegmentations && segmentationToggle.checked ? 'inline-block' : 'none'} ">
                <app-segmentation-image   
                    (load)="onSegmentationLoad($event)"  
                    [imageHeaderId]="data.headerId"></app-segmentation-image>
            </div>
            <img *ngIf="data.imageUrl; else image_loader" [src]="data.imageUrl" [id]=id [class]="class" [ngClass]="{segmented: loadedSegmentations && segmentationToggle.checked}">
            <ng-template #image_loader>
                <mat-progress-bar mode="indeterminate"></mat-progress-bar>
            </ng-template>
        </div>
        <div class="gric__cell center-cell-content">
            <div class="meta-section">
                <mat-expansion-panel 
                    class="meta"
                    *ngIf="meta; else meta_loader"
                    [expanded]="true">
                    <mat-expansion-panel-header>
                    <mat-panel-title>
                        Meta Data
                    </mat-panel-title>
                    </mat-expansion-panel-header>
                    <ul>
                        <li><b>Date:</b> {{meta.header.readingat}}</li>
                        <li><b>Camera:</b> {{meta.cameraName}}</li>
                        <li><b>Encoding:</b> {{meta.encoding}}</li>
                        <li><b>Height:</b> {{meta.height}}</li>
                        <li><b>Width:</b> {{meta.width}}</li>
                        <li><b>Left Exposure:</b> {{meta.leftExposure}}</li>
                        <li><b>Right Exposure:</b> {{meta.rightExposure}}</li>
                        <li><b>Left Gain:</b> {{meta.leftGain}}</li>
                        <li><b>Right Gain:</b> {{meta.rightGain}}</li>
                        <li><b>Descriptor ID:</b>{{meta.header.headerId}}</li>
                    </ul>
                </mat-expansion-panel>
                <ng-template #meta_loader>
                    <mat-progress-bar mode="indeterminate"></mat-progress-bar>
                </ng-template>
            </div>
        </div>
    </div>

</mat-dialog-content>
<mat-dialog-actions align="end" class="modal-footer">
    <mat-paginator 
        *ngIf="data.pagination"
        [pageIndex]="data.pagination.page"
        [length]="data.pagination.pagesLength"
        [pageSize]="data.pagination.pageSize"
        [pageSizeOptions] = "data.pagination.pageSizeOptions"
        (page)="onPaginate($event)">
    </mat-paginator>
    <button mat-button mat-dialog-close>Close</button>
  </mat-dialog-actions>